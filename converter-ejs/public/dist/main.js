(()=>{const e=document.querySelector(".add-currency-btn"),t=document.querySelector(".add-currency-list"),a=document.querySelector(".currencies"),n=[];let r,i,o=[{name:"Dolar Americano",abbreviation:"USD",symbol:"US$",flagURL:"https://www.worldometers.info/img/flags/us-flag.gif",rate:0},{name:"Dolar Canadense",abbreviation:"CAD",symbol:"CA$",flagURL:"https://www.worldometers.info/img/flags/ca-flag.gif",rate:0},{name:"Dolar Australiano",abbreviation:"AUD",symbol:"AU$",flagURL:"https://www.worldometers.info/img/flags/as-flag.gif",rate:0},{name:"Libra Esterlina",abbreviation:"GBP",symbol:"£",flagURL:"https://cdn.britannica.com/25/4825-004-F1975B92/Flag-United-Kingdom.jpg",rate:0},{name:"EURO União Europeia",abbreviation:"EUR",symbol:"€",flagURL:"https://upload.wikimedia.org/wikipedia/commons/b/b7/Flag_of_Europe.svg",rate:0},{name:"Peso Mexicano",abbreviation:"MXN",symbol:"MX$",flagURL:"https://www.worldometers.info/img/flags/mx-flag.gif",rate:0},{name:"Peso Filipino",abbreviation:"PHP",symbol:"₱",flagURL:"https://www.worldometers.info/img/flags/rp-flag.gif",rate:0},{name:"Real Brasileiro",abbreviation:"BRL",symbol:"R$",flagURL:"https://www.worldometers.info/img/flags/br-flag.gif",rate:0}];const s={method:"GET",headers:{"x-rapidapi-key":"MISSING_ENV_VAR".RAPID_API_KEY,"x-rapidapi-host":"MISSING_ENV_VAR".RAPID_API_HOST}};function c(e){e.classList.add("base-currency"),r=e.id;const t=o.find((e=>e.abbreviation===r)).rate;a.querySelectorAll(".currency").forEach((e=>{const a=o.find((t=>t.abbreviation===e.id)).rate,n=e.id===r?1:(a/t).toFixed(2);e.querySelector("base-currency-rate").textContent=`1 ${r} = ${n} ${e.id}`}))}function l(e){o.forEach((e=>{r&&async function(e,t){const a=await fetch(`https://currency-converter5.p.rapidapi.com/currency/convert?format=json&from=${e}&to=${t}&amount=1`,s),n=await a.json();return document.querySelector(".date").textContent=n.updated_date,n}(r,e.abbreviation).then((t=>{const a=e.abbreviation;e.rate=Number(t.rates[a].rate)}))})),0===a.childElementCount&&(r=e.abbreviation,i=0),t.querySelector(`[data-currency=${e.abbreviation}]`).classList.add("disabled");const n=o.find((e=>e.abbreviation===r)).rate,c=e.abbreviation===r?1:(e.rate/n).toFixed(2),l=i?(i*c).toFixed(2):"";a.insertAdjacentHTML("beforeend",`<li class="currency ${e.abbreviation===r?"base-currency":""}" id=${e.abbreviation}>\n    <img src=${e.flagURL} alt="" class="flag">\n    <div class="info">\n      <p class="input">\n        <span class="currency-symbol">\n          ${e.symbol}\n        </span>\n        <input type="text" placeholder="0.00" value=${l}>\n      </p>\n      <p class="currency-name">\n        ${e.abbreviation} - ${e.name}\n      </p>\n      <p class="base-currency-rate">\n        1 ${r} = ${c} ${e.abbreviation}\n      </p>\n    </div>\n    <span class="close">&times;</span>\n  </li>`)}e.addEventListener("click",(function(t){e.classList.toggle("open")})),t.addEventListener("click",(function(e){const t=e.target.closest("li"),a=t.getAttribute("data-currency");if(n.push(a),!t.classList.contains("disabled")){const e=o.find((e=>e.abbreviation===t.getAttribute("data-currency")));e&&l(e)}})),a.addEventListener("click",(function(e){if(e.target.classList.contains("close")){const n=e.target.parentNode;if(n.remove(),t.querySelector(`[data-currency=${n.id}]`).classList.remove("disabled"),n.classList.contains("base-currency")){const e=a.querySelector(".currency");e&&(c(e),i=Number(e.querySelector(".input input").value))}}})),a.addEventListener("input",(function(e){const t=e.target.closest("li").id!==r;t&&(a.querySelector(`#${r}`).classList.remove("base-currency"),c(newBaseCurrencyLI));const n=isNaN(e.target.value)?0:Number(e.target.value);if(i!==n||t){i=n;const e=o.find((e=>e.abbreviation===r)).rate;a.querySelectorAll(".currency").forEach((t=>{if(t.id!==r){const a=o.find((e=>e.abbreviation===t.id)).rate,n=t.id===r?1:(a/e).toFixed(2);t.querySelector(".input input").value=n*i!=0?(n*i).toFixed(2):""}}))}})),a.addEventListener("focusout",(function(e){const t=e.target.value;isNaN(t)||0===Number(t)?e.target.value="":e.target.value=Number(t).toFixed(2)})),a.addEventListener("keydown",(function(e){"Enter"===e.key&&e.target.blur()})),function(){for(let e=0;e<o.length;e++){const a=`\n    <li data-currency=${o[e].abbreviation} >\n      <img src=${o[e].flagURL} alt="" class="flag">\n      <span>${o[e].abbreviation} - ${o[e].name}</span>\n    </li>\n    `;t.insertAdjacentHTML("beforeend",a)}}(),function(){for(let e=0;e<n.length;e++){const t=o.find((t=>t.abbreviation===n[e]));t&&l(t)}}()})();